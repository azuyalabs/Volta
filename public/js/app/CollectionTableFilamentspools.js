webpackJsonp([19],{BEfS:function(t,e,r){var i=r("VU/8")(r("O1lR"),r("P/ct"),!1,null,null,null);t.exports=i.exports},O1lR:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r("En79"),a=r.n(i),n=r("mtWM"),o=r.n(n),s=r("7dEC"),l=(r.n(s),r("N0pv")),c=(r.n(l),r("YLvq")),u=(r.n(c),r("nQ6v"));function m(t,e,r,i,a,n,o){try{var s=t[n](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function f(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.default={props:{},data:function(){return{sortBy:"name",sortDesc:!1,fields:[{key:"name",label:"Name",sortable:!0},{key:"material",sortable:!0},{key:"price",label:"Price per kg",sortable:!1},{key:"usage",label:"Usage",sortable:!1},{key:"actions",label:""}],totalRows:0,currentPage:1,perPage:10,collection:[],filter:{material:"all",manufacturer:"all"}}},mounted:function(){this.getCollection()},computed:{manufacturerFilterOptions:function(){return f(new Set(this.collection.map(function(t){return t.manufacturer}))).sort().map(function(t){return{text:t,value:t}})},materialFilterOptions:function(){return f(new Set(this.collection.map(function(t){return t.material}))).sort().map(function(t){return{text:t.toUpperCase(),value:t}})}},methods:{filterFunction:function(t){return!("all"!==this.filter.material&&this.filter.material!==t.material||"all"!==this.filter.manufacturer&&t.manufacturer!==this.filter.manufacturer)},spoolUsage:function(t){return+(t.length.usage/t.length.capacity*100).toFixed(2)},alertUsage:function(t){return this.spoolUsage(t)>=90&&this.spoolUsage(t)<100},isEmpty:function(t){return 100===this.spoolUsage(t)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},deleteInstance:function(t){var e=this,r=confirm("Do you really want to delete this filament spool?"),i=this.collection.findIndex(function(e){return e.id===t});!0===r&&o.a.delete("/api/filamentspools/"+t).then(function(t){e.collection.splice(i,1)}).catch(function(t){console.log(t)})},getCollection:function(){var t,e=(t=a.a.mark(function t(){var e,r,i,n,s,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.get("/api/filamentspools");case 3:for(e=t.sent,r=e.data.data,i=0;i<r.length;i++){for(l in(n={}).id=r[i].id,s=r[i].attributes)s.hasOwnProperty(l)&&(n[l]=s[l]);this.collection.push(n)}t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",[]);case 12:case"end":return t.stop()}},t,this,[[0,8]])}),function(){var e=this,r=arguments;return new Promise(function(i,a){var n=t.apply(e,r);function o(t){m(n,i,a,o,s,"next",t)}function s(t){m(n,i,a,o,s,"throw",t)}o(void 0)})});return function(){return e.apply(this,arguments)}}(),moneyFormat:u.b,numberFormat:u.c}}},"P/ct":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"d-flex"},[r("div",{staticClass:"p-2"},[r("b-link",{staticClass:"btn btn-primary btn-sm text-uppercase",attrs:{href:"/spools/create",title:"Add a new Spool"}},[r("svgicon",{staticClass:"button-icon-sm",attrs:{icon:"plus",color:"#fff"}}),t._v("\n                add\n            ")],1)],1),t._v(" "),r("div",{staticClass:"ml-auto p-2 d-inline-flex"},[r("b-form-group",{staticClass:"mr-3",attrs:{label:"Material","label-for":"filter_material","label-size":"sm"}},[r("b-form-select",{attrs:{id:"filter_material",options:t.materialFilterOptions,size:"sm"},model:{value:t.filter.material,callback:function(e){t.$set(t.filter,"material",e)},expression:"filter.material"}},[r("option",{attrs:{slot:"first",value:"all"},slot:"first"},[t._v("-- All --")])])],1),t._v(" "),r("b-form-group",{attrs:{label:"Manufacturer","label-for":"filter_manufacturer","label-size":"sm"}},[r("b-form-select",{attrs:{id:"filter_manufacturer",options:t.manufacturerFilterOptions,size:"sm"},model:{value:t.filter.manufacturer,callback:function(e){t.$set(t.filter,"manufacturer",e)},expression:"filter.manufacturer"}},[r("option",{attrs:{slot:"first",value:"all"},slot:"first"},[t._v("-- All --")])])],1)],1)]),t._v(" "),r("b-table",{staticClass:"volta",attrs:{"sort-by":t.sortBy,"sort-desc":t.sortDesc,"filter-function":t.filterFunction,filter:t.filter,items:t.collection,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"name",fn:function(e){return[r("svg",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"color-swatch",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:e.item.color_value,stroke:"silver","stroke-width":"1",title:e.item.color}},[r("circle",{attrs:{cx:"12",cy:"12",r:"10"}})]),t._v(" "),r("div",{staticClass:"d-inline-block"},[r("div",[r("b-link",{attrs:{href:"/spools/"+e.item.id}},[t._v(t._s(e.value))])],1),t._v(" "),r("div",{staticClass:"text-muted small"},[t._v(t._s(e.item.manufacturer))])])]}},{key:"material",fn:function(e){return[r("div",{staticClass:"d-inline-block"},[r("div",{staticClass:"text-uppercase"},[t._v(t._s(e.item.material))]),t._v(" "),r("div",{staticClass:"text-muted small"},[t._v("\n                    "+t._s(e.item.diameter)+" mm / "+t._s(e.item.density)+" g/cm"),r("sup",[t._v("3")])])])]}},{key:"price",fn:function(e){return[t._v(t._s(t.moneyFormat(e.item.unit_price.kilogram.amount))+"\n        ")]}},{key:"usage",fn:function(e){return[r("div",{staticClass:"d-inline-block"},[r("vm-progress",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"filament_spool",attrs:{percentage:t.spoolUsage(e.item),"stroke-width":10,"show-text":!1,title:t.numberFormat(e.item.length.capacity-e.item.length.usage)+" m remaining"}}),t._v(" "),r("div",{staticClass:"text-muted small"},[t._v("\n                    "+t._s(t.numberFormat(t.spoolUsage(e.item),1)+"% used")+"\n                ")])],1),t._v(" "),t.alertUsage(e.item)?r("svg",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"usage-alert",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",title:"You are soon running out of "+e.item.manufacturer+" "+e.item.color+"! Please consider getting a new spool."}},[r("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),t._v(" "),r("line",{attrs:{x1:"12",y1:"8",x2:"12",y2:"12"}}),t._v(" "),r("line",{attrs:{x1:"12",y1:"16",x2:"12",y2:"16"}})]):t._e()]}},{key:"actions",fn:function(e){return[r("b-dropdown",{attrs:{variant:"link",size:"sm",right:"","no-caret":""}},[r("template",{slot:"button-content"},[r("svgicon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"action-icon-md",attrs:{title:"More actions",icon:"actions"}})],1),t._v(" "),r("b-dropdown-item",{attrs:{href:"/spools/"+e.item.id+"/edit",title:"Edit filament spool `"+e.item.name+"`"}},[t._v("Edit\n                ")]),t._v(" "),r("b-dropdown-item",{attrs:{href:"#",title:"Delete filament spool `"+e.item.name+"`"},on:{click:function(r){return r.stopPropagation(),t.deleteInstance(e.item.id)}}},[t._v("Delete\n                ")]),t._v(" "),r("b-dropdown-item",{attrs:{href:"/spools/"+e.item.id+"/duplicate",title:"Duplicate filament spool `"+e.item.name+"`"}},[t._v("Duplicate\n                ")]),t._v(" "),t.isEmpty(e.item)?t._e():r("b-dropdown-item",{attrs:{href:"/spools/"+e.item.id+"/empty",title:"Mark filament spool `"+e.item.name+"` as empty"}},[t._v("Mark as Empty\n                ")])],2)]}}])}),t._v(" "),r("div",{staticClass:"d-flex align-items-center flex-column"},[t.totalRows>t.perPage?r("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)],1)},staticRenderFns:[]}}});